# MySQL Database Configuration
mysql:
  host: "localhost"          # Set via environment variable MYSQL_HOST
  port: 3306                 # Set via environment variable MYSQL_PORT
  database: ""               # Set via environment variable MYSQL_DATABASE
  user: ""                   # Set via environment variable MYSQL_USER
  password: ""               # Set via environment variable MYSQL_PASSWORD

# Shopline API Configuration (Optional - if you still need API access)
# shopline:
#   api_url: "https://api.shoplineapp.com"
#   api_version: "v1"
#   access_token: ""  # Set via environment variable SHOPLINE_ACCESS_TOKEN
#   shop_name: ""     # Set via environment variable SHOPLINE_SHOP_NAME

# Product Categories
categories:
  - DECOR
  - FURNITURE
  - GALLERY
  - HOME TEXTILES
  - LIGHTING
  - SEASONAL

# CLIP Model Configuration
clip:
  model_name: "ViT-L/14"  # Options: ViT-B/32, ViT-B/16, ViT-L/14
  pretrained: "openai"
  device: "cpu"  # cuda or cpu (set to 'cpu' for Apple Silicon M4 Pro)
  batch_size: 16  # Reduced batch size for ViT-L/14 (larger model)
  image_size: 224

# Grounding DINO Configuration
grounding_dino:
  config_file: "GroundingDINO/groundingdino/config/GroundingDINO_SwinT_OGC.py"
  checkpoint_path: "weights/groundingdino_swint_ogc.pth"
  device: "cpu"  # set to 'cpu' for Apple Silicon M4 Pro
  box_threshold: 0.35
  text_threshold: 0.25
  # Text prompts for detection
  prompts:
    - "retail product"
    - "furniture item"
    - "decor item"
    - "home textile product"
    - "lighting fixture"
    - "seasonal decoration"

# FAISS Vector Database Configuration
faiss:
  index_type: "IndexFlatL2"  # Options: IndexFlatL2, IndexIVFFlat, IndexHNSWFlat (HNSW has OpenMP conflicts on Apple Silicon)
  dimension: 768  # CLIP ViT-L/14 output dimension (768 vs 512 for ViT-B/32)
  nlist: 100  # Number of clusters for IVF
  save_path: "data/embeddings/faiss_index.bin"
  metadata_path: "data/embeddings/sku_metadata.pkl"

# Data Paths
paths:
  raw_data: "data/raw"
  images: "data/images"
  embeddings: "data/embeddings"
  weights: "models/weights"

# Inference Configuration
inference:
  confidence_threshold: 0.7
  top_k: 5  # Return top-k similar SKUs
  enable_visualization: true
  output_dir: "output"

# API Server Configuration
api:
  host: "0.0.0.0"
  port: 8000
  workers: 1  # Number of Uvicorn workers
  reload: false  # Set to true for development
  cors_origins:
    - "http://localhost:3000"
    - "http://127.0.0.1:3000"
    - "http://localhost:3001"
  max_upload_size_mb: 10
  max_batch_size: 20
  rate_limit:
    enabled: false  # Enable in production
    requests_per_minute: 60

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/app.log"
